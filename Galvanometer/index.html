<!-- <a-entity gearvr-controls laser-controls="hand: right" id="controller" line="color: #00ffff; opacity: 0.75" raycaster="far: 2"></a-entity> -->
<link rel="manifest" href="manifest.json">
<Title>Galvanometer</Title>

<script src="scripts/aframe.min.js"></script>
<script src="scripts/aframe-extras.min.js"></script>
<script src="scripts/utility.js"></script>
<script src="scripts/voiceover.js"></script>
<script src="scripts/gamemanager.js"></script>
<script src="scripts/cardboardjoystick.js"></script>
<script src="scripts/colorchange.js"></script>
<script src="scripts/questionmanager.js"></script>
<script src="scripts/scoremanager.js"></script>
<script src="scripts/databasemanager.js"></script>
<script src="scripts/login.js"></script>
<script src="appdata.js"></script>
<script src="scripts/cursorzoom.js"></script>
<script src="scripts/highlight.js"></script>
<script src="scripts/animation.js"></script>
<script src="scripts/dragobject.js"></script>
<script src="scripts/raycastlistener.js"></script>


<script>
    AFRAME.registerComponent('auto-enter-vr', {
        init: function() {
            //this.el.sceneEl.enterVR();
            var scene = this;

            scene.el.addEventListener('loaded', function() {
                setTimeout(function() {

                }, 3000);
            });

        }
    });

    AFRAME.registerComponent('foo', {
        init: function() {

            this.el.addEventListener('animationcomplete', myfun);
        }
    });



    function myfun() {
        console.log("Responding-----------------------");
    }
</script>
<!-- --------------------------------------------------------------------------------- -->

<a-scene renderer="antialias: true;
colorManagement: true;
sortObjects: true;
physicallyCorrectLights: true;">


    <!-- Controllers -->
    <a-entity setactive="value:false" gearvr-controls laser-controls="hand: right" id="gvrc" line="color: #00ffff; opacity: 0.75"></a-entity>
    <a-entity setactive="value:false" daydream-controls laser-controls="hand: right" id="ddc" line="color: #00ffff; opacity: 0.75"></a-entity>
    <a-entity setactive="value:false" oculus-go-controls laser-controls="hand: right" id="oc" line="color: #00ffff; opacity: 0.75"></a-entity>
    <!-- /Controllers -->



    <a-sound id="s_click" src="src: url(sounds/click.mp3)" poolSize=5></a-sound>
    <a-sound id="s_hover" src="src: url(sounds/hover.wav)" poolSize=5></a-sound>

    <a-sound id="s_btn_lo" src="src: url(sounds/btn_lo.wav)" poolSize=5></a-sound>
    <a-sound id="s_btn_l1" src="src: url(sounds/btn_l1.wav)" poolSize=5></a-sound>
    <a-sound id="s_btn_l2" src="src: url(sounds/btn_l2.wav)" poolSize=5></a-sound>
    <a-sound id="s_btn_as" src="src: url(sounds/btn_as.wav)" poolSize=5></a-sound>
    <a-sound id="s_btn_close" src="src: url(sounds/btn_close.wav)" poolSize=5></a-sound>

    <a-sound id="s_p_objective" src="src: url(sounds/p_objective.wav)" poolSize=5></a-sound>
    <a-sound id="s_p_complete" src="src: url(sounds/p_complete.wav)" poolSize=5></a-sound>
    <a-sound id="s_p_score_inst" src="src: url(sounds/p_score_inst.wav)" poolSize=5></a-sound>

    <a-sound id="s_p_comp_as" src="src: url(sounds/p_comp_as.wav)" poolSize=5></a-sound>
    <a-sound id="s_p_greaterthan" src="src: url(sounds/p_greaterthan.wav)" poolSize=5></a-sound>
    <a-sound id="s_p_lessthan" src="src: url(sounds/p_lessthan.wav)" poolSize=5></a-sound>
    <a-sound id="s_p_score_inst" src="src: url(sounds/p_score_inst.wav)" poolSize=5></a-sound>

    <a-sound id="s_welldone" src="src: url(sounds/welldone.wav)" poolSize=5></a-sound>
    <a-sound id="s_tryagain" src="src: url(sounds/tryagain.wav)" poolSize=5></a-sound>
    <!-- <a-sound id="s_currectOption" src="src: url(sounds/currectOption.wav)" poolSize=5></a-sound> -->





    <a-sound id="s_p_DefinitionPanel" src="src: url(sounds/p_DefinitionPanel.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_ToggleLabelIns" src="src: url(sounds/i_ToggleLabelIns.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_ToggleLabelIns2" src="src: url(sounds/i_ToggleLabelIns2.wav)" poolSize=5></a-sound>
    <a-sound id="s_b_Magnet" src="src: url(sounds/b_Magnet.wav)" poolSize=5></a-sound>
    <a-sound id="s_b_Spring" src="src: url(sounds/b_Spring.wav)" poolSize=5></a-sound>
    <a-sound id="s_b_Needle" src="src: url(sounds/b_Needle.wav)" poolSize=5></a-sound>
    <a-sound id="s_b_Scale" src="src: url(sounds/b_Scale.wav)" poolSize=5></a-sound>
    <a-sound id="s_b_Electromagnet" src="src: url(sounds/b_Electromagnet.wav)" poolSize=5></a-sound>
    <a-sound id="s_C_Inst_ActivityComplete" src="src: url(sounds/C_Inst_ActivityComplete.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_ToggleLabelIns3" src="src: url(sounds/CloseKeyInstruction.wav)" poolSize=5></a-sound>
    <a-sound id="s_p_InstructionPanel1" src="src: url(sounds/CloseMessage.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_ToggleLabelIns4" src="src: url(sounds/OpenkeyInstruction.wav)" poolSize=5></a-sound>
    <a-sound id="s_p_InstructionPanel2" src="src: url(sounds/OpenMessage.wav)" poolSize=5></a-sound>

    <a-sound id="s_p_InstructionPanel4" src="src: url(sounds/C_Inst_ActivityComplete.wav)" poolSize=5></a-sound>
    <a-sound id="s_p_InstructionPanel5" src="src: url(sounds/p_DefinitionPanel5.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_Q1" src="src: url(sounds/Q1.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_Q2" src="src: url(sounds/Q2.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_Q3" src="src: url(sounds/Q3.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_Q4" src="src: url(sounds/Q4.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_Q5" src="src: url(sounds/Q5.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_A1" src="src: url(sounds/Q1_A.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_A2" src="src: url(sounds/Q2_A.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_A3" src="src: url(sounds/Q3_A.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_A4" src="src: url(sounds/Q4_A.wav)" poolSize=5></a-sound>
    <a-sound id="s_i_A5" src="src: url(sounds/Q5_A.wav)" poolSize=5></a-sound>




    <a-assets id="assets" timeout="3600000">

        <img id="tex_menu_off" src="images/Btn_Off.png">
        <img id="tex_menu_on" src="images/Btn_On.png">

        <img id="img360" src="images\LivingRoom_sence_left.jpg">
        <img id="img3602" src="images\skybox.jpg">
        <audio id="bgsound" src="sounds/bg.mp3"></audio>


        <!--------------------------- Sumit Models ----------------------------->
        <a-asset-item id="BaseL1" src="Hs40060_Galvanometer_Data/Model/Base/Base.gltf"></a-asset-item>
        <a-asset-item id="ElectroMagnetL1" src="Hs40060_Galvanometer_Data/Model/Electromagnet/Electromagnet.gltf"></a-asset-item>
        <a-asset-item id="MagnetL1" src="Hs40060_Galvanometer_Data/Model/Magnet/Magnet.gltf"></a-asset-item>
        <a-asset-item id="MeterL1" src="Hs40060_Galvanometer_Data/Model/Meter/Meter.gltf"></a-asset-item>
        <a-asset-item id="NiddleL1" src="Hs40060_Galvanometer_Data/Model/Niddle/Niddle.gltf"></a-asset-item>
        <a-asset-item id="CageL1" src="Hs40060_Galvanometer_Data/Model/Transparent/Cage.gltf"></a-asset-item>
        <a-asset-item id="RingL1" src="Hs40060_Galvanometer_Data/Model/Ring/Ring.gltf"></a-asset-item>


        <a-asset-item id="Meter2L1" src="Hs40060_Galvanometer_Data/Gal/Scale/Scale.gltf"></a-asset-item>
        <a-asset-item id="Niddle2L1" src="Hs40060_Galvanometer_Data/Gal/Needle/Needle.gltf"></a-asset-item>
        <a-asset-item id="Ring2L1" src="Hs40060_Galvanometer_Data/Gal/Coil/Coil.gltf"></a-asset-item>


        <a-asset-item id="Clip1L2" src="Hs40060_Galvanometer_Data/Animation/Clip_01/Clip_01.gltf"></a-asset-item>
        <a-asset-item id="Clip2L2" src="Hs40060_Galvanometer_Data/Animation/Clip_02/Clip_02.gltf"></a-asset-item>
        <a-asset-item id="CurrentFlowL2" src="Hs40060_Galvanometer_Data/Animation/Current_flow/Current_flow.gltf"></a-asset-item>
        <a-asset-item id="KeyL2" src="Hs40060_Galvanometer_Data/Gal/Holder/Holder.gltf"></a-asset-item>


        <a-asset-item id="TransparentRing" src="Hs40060_Galvanometer_Data/Model/Transparent/Coil.gltf"></a-asset-item>
        <a-asset-item id="TransparentMagnet" src="Hs40060_Galvanometer_Data/Model/Transparent/Magnet.gltf"></a-asset-item>
        <a-asset-item id="TransparentMotor" src="Hs40060_Galvanometer_Data/Model/Transparent/Motor.gltf"></a-asset-item>
        <a-asset-item id="TransparentNeedle" src="Hs40060_Galvanometer_Data/Model/Transparent/Needle.gltf"></a-asset-item>
        <a-asset-item id="TransparentScale" src="Hs40060_Galvanometer_Data/Model/Transparent/Scale.gltf"></a-asset-item>






        <!--------------------------- End ----------------------------->

        <img id="MainMenu_close" src="models/Images/close.png">


        <a-mixin id="Welldone" text="value:Well Done ; width:2.8 ; align:center;  color: #35ff35"></a-mixin>
        <a-mixin id="Tryagain" text="value:Try Again ; width:2.8 ; align:center;  color: red"></a-mixin>

        <a-mixin id="OK" text="value: OK; align:center; width: 3; color: white" material="color: black; opacity:0.8" click_sound cardboard_input color_hover>
        </a-mixin>



    </a-assets>
    <a-sound src="#bgsound" autoplay="true" volume="0.5" loop='true'></a-sound>


    <!-- ----------------------------  Main Menu  ------------------------------------- -->

    <a-entity id="MainMenu" setactive="value:false">

        <a-sky src="#img360" rotation="0 -95 0"></a-sky>


        <!-- Title -->
        <a-entity position="0 2.5 -3" geometry="primitive: plane; width: 1.5; height: 0.35;" material="color: black; opacity:1" text="value:Galvanometer; align:center; width: 5 ">
        </a-entity>


        <a-image id="btn_lo" position="-1.8 1.5 -3" geometry="primitive: plane; width: 1.2; height: 0.65" material="color: white; opacity:1 ; src: #tex_menu_off ;" text="value: View learning \n objectives; align:center; width: 3" click_sound cardboard_input vo_hover color_hover onclick="OnClickObjective();">
        </a-image>

        <a-image id="btn_l1" position="-0.5 1.5 -3" geometry="primitive: plane; width: 1.2; height: 0.65" material="color: white; opacity:1 ; src: #tex_menu_off ;" text="value: Construction of \n a galvanometer;

              align:center; width: 3" click_sound cardboard_input vo_hover color_hover onclick="OnClickL1();">
        </a-image>

        <a-image id="btn_l2" position="0.8 1.5 -3" geometry="primitive: plane; width: 1.2; height: 0.65" material="color: white; opacity:1 ; src: #tex_menu_off ;" text="value: Working of \n a galvanometer;

              align:center; width: 3" click_sound cardboard_input vo_hover color_hover onclick="OnClickL2();">
        </a-image>

        <a-image id="btn_as" position="2.1 1.5 -3"
        geometry="primitive: plane; width: 1.2; height: 0.65" material="color: white; opacity:1 ; src: #tex_menu_off ;" text="value: Assess your \n knowledge; align:center; width: 3" click_sound cardboard_input vo_hover color_hover onclick="OnClickAS();">
        </a-image>


        <a-image id="btn_close" setactive="value:true" position="1.2 2.2 -2" src="#MainMenu_close" geometry="primitive: plane; width: 0.18; height: 0.18"
         click_sound cardboard_input vo_hover onclick="btn_close_click();">
        </a-image>


    </a-entity>




    <!-- ----------------------------  /Main Menu  ------------------------------------- -->




    <!-- ----------------------------  Objective Scene  ------------------------------------- -->
    <a-entity id="LO" setactive="value:false">
        <a-sky src="#img360" rotation="0 -95 0"></a-sky>


        <!-- Objective panel -->
        <a-entity id="p_objective" position="0 2 -3" vo_enable="play:false"
        geometry="primitive: plane; width: 3.2; height: 1.2"
        material="color: black; opacity:1">
            <a-text value="Learning Objectives

   After completing this module, you will be able to:
 1- Describe the construction of a galvanometer.
 2- Explain the workings of a galvanometer.
" position="-1.4 0.2 0" align="left" width="3"></a-text>

            <!-- Ok button -->
            <a-image id="btn_ok" position="0 -0.361 0.01" src="#tex_menu_off" geometry="primitive: plane; width: 0.6; height: 0.3" text="value: OK; align:center; width: 3; color: white" click_sound cardboard_input color_hover onclick="OnClickObjectiveOk();">
            </a-image>

        </a-entity>


    </a-entity>
    <!-- ----------------------------  /Objective Scene  ------------------------------------- -->




    <!-- ----------------------------  Level 1  ------------------------------------- -->
    <a-entity id="L1" setactive="value:false">
        <a-sky src="#img360" rotation="0 -95 0"></a-sky>
        <a-light intensity="1" position="0 0 0" rotation="0 0 0" type="ambient"></a-light>

        <a-entity id="Base_lvl1" setactive="value:true;scale:0.1" gltf-model="#BaseL1" position="0 0 -7" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
        <a-entity id="ElectroMagnet_lvl1" setactive="value:true;scale:0.1" gltf-model="#ElectroMagnetL1" position="0 0 -7" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
        <a-entity id="Magnet_lvl1" setactive="value:true;scale:0.1" gltf-model="#MagnetL1" position="0 0 -7" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
        <a-entity id="Meter_lvl1" setactive="value:true;scale:0.1" gltf-model="#MeterL1" position="0 0 -7" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
        <a-entity id="Niddle_lvl1" setactive="value:true;scale:0.1" gltf-model="#NiddleL1" position="0 0 -7" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
        <a-entity id="Cage_lvl1" setactive="value:false;scale:0.1" gltf-model="#CageL1" position="0 0 -7" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
        <a-entity id="Ring_lvl1" setactive="value:true;scale:0.1" gltf-model="#RingL1" position="0 0 -7" rot ="enabled:false"  scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
        <a-entity id="Ring2_lvl1" setactive="value:false;scale:0.1" gltf-model="#Ring2L1" position="0 0 -7" rot ="enabled:false"  scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
        <a-entity id="Niddle2_lvl1" setactive="value:false;scale:0.1" gltf-model="#Niddle2L1" position="0 0 -7"  rot ="enabled:false"  scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
        <a-entity id="Meter2_lvl1" setactive="value:false;scale:0.1" gltf-model="#Meter2L1" position="0 0 -7" rot ="enabled:false"  scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>


        <a-entity id="p_DefinitionPanel" position="0 2.5 -3" rotation="0 0 0" setactive="value:true" geometry="primitive: plane; width: 3; height: 0.8"
        material="color: black; opacity:1" text="value:A galvanometer is a device used to detect electric current.;
         align:center; baseline:bottom;  width: 2.8; xOffset:0.0; yOffset:1">

            <a-image id="btn_ok" position="0 -0.2 0.01" geometry="primitive: plane; width: 0.5; height: 0.25"
            material="color: black; opacity:0.8" text="value: OK; align:center; width: 3; color: white"
            click_sound cardboard_input color_hover onclick="p_Definationpnl_OKclick();">
            </a-image>
        </a-entity>

        <a-entity id="b_LabelOn" position="0 2.035 -2" setactive="value:false" geometry="primitive: plane; width: 0.6; height: 0.2" material="color: black; opacity:0.9"
        text="value: LABEL ON; align:center; width: 2.5; color: white" click_sound cardboard_input color_hover onclick="onClickb_LabelOn();">
        </a-entity>

        <a-entity id="b_Split" position="0 2.25 -2" setactive="value:false" geometry="primitive: plane; width: 0.6; height: 0.2" material="color: black; opacity:0.9"
        text="value: SPLIT; align:center; width: 2.5; color: white" click_sound cardboard_input color_hover onclick="onClickb_Split();">
        </a-entity>


        <a-entity id="label_Scale" position="2.865 1.649 -6.790" setactive="value:false" geometry="primitive: plane;
         width: 1.5; height: 0.4" material="color: black; opacity:0.9"
        text="value: Scale; align:center; width: 5; color: white" >
        <a-image id="Indicator_Scale" position="-1.53 0 0"  geometry="primitive: plane;
         width: 1.6; height: 0.02" material="color: white; opacity:0.9"
         <a-image>
        </a-entity>

        <a-entity id="label_Needle" position="2.362 1.208 -6.618" setactive="value:false" geometry="primitive: plane;
         width: 1.5; height: 0.4" material="color: black; opacity:0.9"
        text="value: Needle; align:center; width: 5; color: white" >
        <a-image id="Indicator_Needle" position="-1.53 0 0"  geometry="primitive: plane;
         width: 1.6; height: 0.02" material="color: white; opacity:0.9"
         <a-image>

        </a-entity>

        <a-entity id="label_PermanentMagnet" position="2.88 0.751 -6.618"
        setactive="value:false" geometry="primitive: plane;
         width: 2; height: 0.4" material="color: black; opacity:0.9"
        text="value: Permanent Magnet; align:center; width: 5; color: white" >
        <a-image id="Indicator_PermamnentMagnet" position="-1.53 0 0"  geometry="primitive: plane;
         width: 1.4; height: 0.02" material="color: white; opacity:0.9"
         <a-image>

        </a-entity>

        <a-entity id="label_Electromagnet" position="2.442 0.291 -6.618"
        setactive="value:false" geometry="primitive: plane;
         width: 2; height: 0.4" material="color: black; opacity:0.9"
        text="value: Electromagnet; align:center; width: 5; color: white" >
        <a-image id="Indicator_Electromagnet" position="-1.53 0 0"  geometry="primitive: plane;
         width: 1.4; height: 0.02" material="color: white; opacity:0.9"
         <a-image>

        </a-entity>


        <a-entity id="label_Spring" position="-2.47 0.283 -6.618"
        setactive="value:false" geometry="primitive: plane;
         width: 2; height: 0.4" material="color: black; opacity:0.9"
        text="value: Spring; align:center; width: 5; color: white" >
        <a-image id="Indicator_Spring" position="1.7 0 0"  geometry="primitive: plane;
         width: 1.4; height: 0.02" material="color: white; opacity:0.9"
         <a-image>

        </a-entity>

        <a-entity id="p_DefinitionPanel" position="0 2.5 -3" rotation="0 0 0" setactive="value:false" geometry="primitive: plane; width: 3; height: 0.8"
        material="color: black; opacity:1" text="value:A galvanometer is a device used to detect electric current.;
         align:center; baseline:bottom;  width: 2.8; xOffset:0.0; yOffset:1">

            <a-image id="btn_ok" position="0 -0.2 0.01" geometry="primitive: plane; width: 0.5; height: 0.25"
            material="color: black; opacity:0.8" text="value: OK; align:center; width: 3; color: white"
            click_sound cardboard_input color_hover onclick="p_Definationpnl_OKclick();">
            </a-image>
        </a-entity>

        <a-entity id="b_Magnet" position="-5.51 0.869 -6.746" rotation="0, 30, 0" setactive="value:false"
        geometry="primitive: plane; width: 1.7; height: 0.25" material="color: black; opacity:0.9"
        text="value:Permanent magnet; align:center; width: 4; color: white" click_sound cardboard_input color_hover onclick="button_click(1);">
        </a-entity>

        <a-entity id="label_Magnetdefine" position="-5.51 0.482 -6.746" rotation="0, 30, 0" setactive="value:false" geometry="primitive: plane;
         width: 5.2 ; height: 0.5" material="color: black; opacity:0.9"
        text="value: A permanent magnet is a strong, U-shaped magnet with concave pole pieces.; align:center; width: 5; color: white" >
       </a-entity>

        <a-entity id="b_Spring" position="-4 3.5 -7" rotation="0, 30, 0" setactive="value:false" geometry="primitive: plane; width: 0.8; height: 0.3" material="color: black; opacity:0.9"
        text="value: Spring; align:center; width: 4; color: white" click_sound cardboard_input color_hover onclick="button_click(2);">
        </a-entity>

        <a-entity id="label_Springdefine" position="-3.6 2.86 -7" rotation="0, 30, 0" setactive="value:false" geometry="primitive: plane;
         width:5 ; height: 0." material="color: black; opacity:0.9"
        text="value: A spring is connected to the electromagnet and tends to resist the movement of the coil when there is current running through it. This controls the motion of the coil.; align:center; width: 5; color: white" >

        </a-entity>

        <a-entity id="b_Needle" position="0 3.84 -6.5" setactive="value:false" geometry="primitive: plane; width: 1.0; height: 0.3" material="color: black; opacity:0.9"
        text="value:Needle ; align:center; width: 5; color: white" click_sound cardboard_input color_hover onclick="button_click(3);">
        </a-entity>
        <a-entity id="label_Needledefine" position="0 3.21 -6.5" setactive="value:false" geometry="primitive: plane;
         width: 5 ; height: 0.6" material="color: black; opacity:0.9"
        text="value: A needle is attached to the moving coil so that it moves over the scale when the coil rotates.; align:center; width: 5; color: white" >

        </a-entity>

        <a-entity id="b_Scale" position="4 3.5 -7" rotation="0, -30, 0" setactive="value:false" geometry="primitive: plane; width: 0.65; height: 0.25" material="color: black; opacity:0.9"
        text="value: Scale; align:center; width: 4; color: white" click_sound cardboard_input color_hover onclick="button_click(4);">
        </a-entity>

        <a-entity id="label_Scaledefine" position="4.307 2.9 -7" rotation="0, -30, 0" setactive="value:false" geometry="primitive: plane;
         width: 5; height: 0.8" material="color: black; opacity:0.9"
        text="value: A scale is used to measure the deflection of the coil.; align:center; width: 5; color: white" >

        </a-entity>

        <a-entity id="b_Electromagnet" position="5.51 0.869 -6.746" rotation="0, -30, 0"  setactive="value:false" geometry="primitive: plane; width: 1.3; height: 0.2" material="color: black; opacity:0.9"
        text="value: Electromagnet; align:center; width: 4; color: white" click_sound cardboard_input color_hover onclick="button_click(5);">
        </a-entity>

        <a-entity id="label_Electromagnetdefine" position="5.51 0.452 -6.746" rotation="0, -30, 0"  setactive="value:false" geometry="primitive: plane;
         width: 5.2 ; height: 0.55" material="color: black; opacity:0.9"
        text="value: An electromagnet consists of a soft iron core, over which a rectangular coil of several turns is wound.; align:center; width: 5; color: white" >

        </a-entity>

        <a-entity id="p_completeLvl1" position="0 2 -3.5" rotation="0 0 0"
        setactive="value:false" geometry="primitive: plane; width: 2.5; height: 0.9"
        material="color: black; opacity:1"
        text="value:You have completed this activity. Select OK
to return to the menu and continue
to the next activity.; align:center; baseline:bottom;  width: 2.8; xOffset:0.0; yOffset:1">

            <a-image id="btn_ok" position="0 -0.24 0.01" geometry="primitive: plane; width: 0.5; height: 0.25"
            material="color: black; opacity:0.8" text="value: OK; align:center; width: 3; color: white"
            click_sound cardboard_input color_hover onclick="OnClick_CompleteOk();">
            </a-image>
        </a-entity>


      </a-entity>

      <!-- ----------------------------  Level 1 Completed ------------------------------------- -->




<!-- ----------------------------  Level 2 ------------------------------------- -->

<a-entity id="L2" setactive="value:false">
    <a-sky src="#img360" rotation="0 -95 0"></a-sky>
    <a-light intensity="1" position="0 0 0" rotation="0 0 0" type="ambient"></a-light>

    <a-entity id="aClip1_lvl2" setactive="value:true;scale:0.1" gltf-model="#Clip1L2"  position="0 0 -5" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
    <a-entity id="aClip2_lvl2" setactive="value:false;scale:0.1" gltf-model="#Clip2L2" position="0 0 -5" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
    <a-entity id="aCurrentFlow_lvl2" setactive="value:false;scale:0.1"  gltf-model="#CurrentFlowL2" position="0 0 -5" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
    <a-entity id="mkey1_lvl2" setactive="value:true;scale:0.1" gltf-model="#KeyL2" position="0.579 0.505 -3.747" scale="0.1 0.1 0.1" rotation="0 0 -90">
      <a-sphere id="highlight_key" highlight position="-1.88 0.055 -0.587" highlight radius="1" setactive="value:true"
              material="color:green"
              click_sound cardboard_input onclick="OnClick_HighlightKey();">
            </a-sphere>
    </a-entity>


  <a-entity id="mkey2_lvl2" setactive="value:false;scale:0.1" gltf-model="#KeyL2" position="0.28 0.116 -3.747" scale="0.1 0.1 0.1" rotation="0 0 0">
    <a-sphere id="highlight_key2" highlight position="-2.079 0.116 -0.020" highlight radius="1" setactive="value:true"
            material="color:green"
            click_sound cardboard_input onclick="OnClick_HighlightKey2();">
          </a-sphere>
  </a-entity>


    <a-entity id="p_InstructionPanel1" position="0 2.5 -3" rotation="0 0 0" setactive="value:false" geometry="primitive: plane; width: 3.2; height: 1.2"
    material="color: black; opacity:1" text="value:When current passes through the electromagnet, it rotates until the force between it and the permanent magnet is balanced by the forces exerted on it by the spring.;
     align:center; baseline:bottom;  width: 2.8; xOffset:0.0; yOffset:1">

        <a-image id="btn_ok" position="0 -0.33 0.01" geometry="primitive: plane; width: 0.5; height: 0.25"
        material="color: black; opacity:0.8" text="value: OK; align:center; width: 3; color: white"
        click_sound cardboard_input color_hover onclick="button_click1();">
        </a-image>
    </a-entity>


    <a-entity id="p_InstructionPanel2" position="0 2.5 -3" rotation="0 0 0" setactive="value:false" geometry="primitive: plane; width: 2.9; height: 0.8"
    material="color: black; opacity:1" text="value:When the current through the coil is switched off, the coil returns to its original position.;
     align:center; baseline:bottom;  width: 2.8; xOffset:0.0; yOffset:1">

        <a-image id="btn_ok" position="0 -0.2 0.01" geometry="primitive: plane; width: 0.5; height: 0.25"
        material="color: black; opacity:0.8" text="value: OK; align:center; width: 3; color: white"
        click_sound cardboard_input color_hover onclick="button_click2();">
        </a-image>
    </a-entity>

    <a-entity id="p_InstructionPanel3" position="0 2.5 -3" rotation="0 0 0" setactive="value:false" geometry="primitive: plane; width: 2.9; height: 0.8"
    material="color: black; opacity:1" text="value:You have completed this activity. Select OK to return to the menu and continue to the next activity.;
     align:center; baseline:bottom;  width: 2.8; xOffset:0.0; yOffset:1">

        <a-image id="btn_ok" position="0 -0.2 0.01" geometry="primitive: plane; width: 0.5; height: 0.25"
        material="color: black; opacity:0.8" text="value: OK; align:center; width: 3; color: white"
        click_sound cardboard_input color_hover onclick="OnClick_CompleteOk2();">
        </a-image>
    </a-entity>
</a-entity>

    <!-- ----------------------------  Level 2 Completed ------------------------------------- -->




    <!-- ----------------------------  Level As ------------------------------------- -->


<a-entity id="AS" setactive="value:false">
  <a-sky src="#img360" rotation="0 -95 0"></a-sky>
  <a-light intensity="1" position="0 0 0" rotation="0 0 0" type="ambient"></a-light>
  <a-entity id="Cage_lvlAs" setactive="value:false; scale:0.1" gltf-model="#CageL1" position="0 0 -7" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0">
  </a-entity>


  <a-entity id="p_InstructionPanel4" position="0 2.956 -3" rotation="0 0 0" setactive="value:true" geometry="primitive: plane; width: 2.9; height: 1.1"
  material="color: black; opacity:1" text="value:Follow the instructions to perform the assessment and earn points. You can try multiple times, but points are only awarded if you answer correctly on the first try.;
   align:center; baseline:bottom;  width: 2.8; xOffset:0.0; yOffset:1">

      <a-image id="btn_ok" position="0 -0.34 0.01" geometry="primitive: plane; width: 0.5; height: 0.25"
      material="color: black; opacity:0.8" text="value: OK; align:center; width: 3; color: white"
      click_sound cardboard_input color_hover onclick="button_clickAs1();">
      </a-image>


   </a-entity>
   <a-entity id="p_InstructionPanel5" position="0 2.956 -3" rotation="0 0 0" setactive="value:false" geometry="primitive: plane; width: 2.9; height: 0.8"
   material="color: black; opacity:1" text="value:Identify the parts according to the description provided and drag them over the wireframe.;
    align:center; baseline:bottom;  width: 2.8; xOffset:0.0; yOffset:1">

       <a-image id="btn_ok" position="-0.06 -0.3 0.098" geometry="primitive: plane; width: 0.5; height: 0.25"
       material="color: black; opacity:0.8" text="value: OK; align:center; width: 3; color: white"
       click_sound cardboard_input color_hover onclick="button_clickAs2();">
       </a-image>


  </a-entity>

  <a-entity id="Base_lvlAs" setactive="value:true;scale:0.1" gltf-model="#BaseL1" position="0 0 -7" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
  <a-entity id="ElectroMagnet_lvlAs" cardboard_input dragit="enabled:true" setactive="value:true;scale:0.1" gltf-model="#ElectroMagnetL1" position="5.56, 0.0, -7.291" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
  <a-entity id="Magnet_lvlAs" cardboard_input dragit="enabled:true" setactive="value:true;scale:0.1" gltf-model="#MagnetL1" position="-2.77, 1.5, -6.276" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
  <a-entity id="Meter_lvlAs" cardboard_input dragit="enabled:true" setactive="value:true;scale:0.1" gltf-model="#MeterL1" position="3.474, 0.630, -7.156" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
  <a-entity id="Niddle_lvlAs" cardboard_input dragit="enabled:true" setactive="value:true;scale:0.1" gltf-model="#NiddleL1" position="-4.51, 0.0, -5.741" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
  <a-entity id="Ring_lvlAs" cardboard_input dragit="enabled:true" setactive="value:true;scale:0.1" gltf-model="#RingL1" position="-0.02, 2.222, -5.783" rot ="enabled:false"  scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>

  <a-entity id="b_Ok1" position="-0.02 2.0779 -5.637" rotation= "0 0 0" setactive="value:false"
  geometry="primitive: plane; width: 0.7; height: 0.27" material="color: black; opacity:0.9"
  text="value: OK; align:center; width: 4; color: white" click_sound cardboard_input color_hover onclick="onClickOkAfterDrag(1);">
  </a-entity>

  <a-entity id="b_Ok2" position="-0.02 2.0779 -5.637" rotation= "0 0 0" setactive="value:false"
  geometry="primitive: plane; width: 0.7; height: 0.27" material="color: black; opacity:0.9"
  text="value: OK; align:center; width: 4; color: white" click_sound cardboard_input color_hover onclick="onClickOkAfterDrag(2);">
  </a-entity>

  <a-entity id="b_Ok3" position="-0.02 2.0779 -5.637" rotation= "0 0 0" setactive="value:false"
  geometry="primitive: plane; width: 0.7; height: 0.27" material="color: black; opacity:0.9"
  text="value: OK; align:center; width: 4; color: white" click_sound cardboard_input color_hover onclick="onClickOkAfterDrag(3);">
  </a-entity>

  <a-entity id="b_Ok4" position="-0.02 2.0779 -5.637" rotation= "0 0 0" setactive="value:false"
  geometry="primitive: plane; width: 0.7; height: 0.27" material="color: black; opacity:0.9"
  text="value: OK; align:center; width: 4; color: white" click_sound cardboard_input color_hover onclick="onClickOkAfterDrag(4);">
  </a-entity>

  <a-entity id="b_Ok5" position="-0.02 2.0779 -5.637" rotation= "0 0 0" setactive="value:false"
  geometry="primitive: plane; width: 0.7; height: 0.27" material="color: black; opacity:0.9"
  text="value: OK; align:center; width: 4; color: white" click_sound cardboard_input color_hover onclick="onClickOkAfterDrag(5);">
  </a-entity>



    <a-entity id="TransparentRingAS" cardboard_input raycastlistener setactive="value:true;scale:0.1" gltf-model="#TransparentRing" position="0 0.277 -6.644" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
    <a-entity id="TransparentMagnetAS" cardboard_input raycastlistener setactive="value:true;scale:0.1" gltf-model="#TransparentMagnet" position="0 0.432 -7" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
    <a-entity id="TransparentMotorAS" cardboard_input raycastlistener  setactive="value:true;scale:0.1" gltf-model="#TransparentMotor" position="0 0.665 -5.257" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
    <a-entity id="TransparentNeedleAS" cardboard_input raycastlistener setactive="value:true;scale:0.1" gltf-model="#TransparentNeedle" position="0 0.937 -6.629" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>
    <a-entity id="TransparentScaleAS" cardboard_input raycastlistener  setactive="value:true;scale:0.1" gltf-model="#TransparentScale" position="0 0.956 -6.714" rot ="enabled:false" scale="0.1 0.1 0.1" rotation="0 0 0"></a-entity>




    <a-entity id="p_comp_as" position="0 2 -3" setactive="value:false" geometry="primitive: plane; width: 2.4; height: 1.1" material="color: black; opacity:1">

        <a-text value="You have completed the assessment.
    Here is your score:" position="0 0.3 0" align="center" width="2.8"></a-text>

        <a-text id="score_percent" value="100 %" position="0 0 0" align="center" width="2.8"></a-text>

        <a-image id="btn_ok" mixin="OK" width="0.5" height="0.25" position="0 -0.2 0.01" onclick="p_comp_as_click();">

    </a-entity>


    <a-entity id="p_lessthan" position="0 2 -3" setactive="value:false" geometry="primitive: plane; width: 3; height: 1.1" material="color: black; opacity:1">

        <a-text value="You have scored less than 60%. After returning
    to the menu, you can try the assessment
    again to improve your score, or you can exit." position="0 0.2 0" align="center" width="2.8"></a-text>

        <a-image id="btn_ok" mixin="OK" width="0.5" height="0.25" position="0 -0.3 0.01" onclick="p_lessthan_click();">

    </a-entity>


    <a-entity id="p_greaterthan" position="0 2 -3" setactive="value:false" geometry="primitive: plane; width: 3; height: 1.1" material="color: black; opacity:1">

        <a-text value="You scored well and you have completed the module! Select OK to return to the menu where you can exit." position="0 0.2 0" align="center" width="2.8"></a-text>

        <a-image id="btn_ok" mixin="OK" width="0.5" height="0.25" position="0 -0.3 0.01" onclick="p_greaterthan_click();">

    </a-entity>

    </a-entity>

    <!-- ----------------------------  AS Completed ------------------------------------- -->



    <a-camera look-controls wasd-controls="ad-enabled:false;ws-enabled:false">
    <a-cursor fuse="false" cursor-zoom id="cursor" setactive="value:false" fuseTimeout='60000' rayOrigin="mouse" geometry="primitive: ring" material="color: white;  shader: flat">
    </a-cursor>


        <!------------------------------------------ Camera instructions -->


        <a-entity id="i_ToggleLabelIns" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 3; height: 0.55" material="color: black; opacity:1"
        text="value:Click LABEL ON to view the different parts. You may zoom in, zoom out, or rotate the galvanometer using the controller.; align:center; width: 2.8;">
        </a-entity>


        <a-entity id="i_ToggleLabelIns2" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 3; height: 0.55" material="color: black; opacity:1"
                text="value:Center the pointer on any part to zoom in or click on any label to view its description.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_ToggleLabelIns3" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 1.56; height: 0.25" material="color: black; opacity:1"
                text="value:Click on the key to close it.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_ToggleLabelIns4" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 1.8; height: 0.25" material="color: black; opacity:1"
                text="value:Now, click on the key to open it.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_Q1" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 2.5; height: 0.28" material="color: black; opacity:1"
                text="value:It consists of a soft iron core over which a rectangular coil of several turns is wound.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_A1" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 2.8; height: 0.42" material="color: black; opacity:1"
                text="value:The electromangnet consists of a soft iron core over which a rectangular coil of several turns is wound.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_Q2" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 3.2; height: 0.54" material="color: black; opacity:1"
                text="value:It is connected to the electromagnet and tends to resist the movement of the coil when there is current running through it. This controls the motion of the coil.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_A2" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 3.2; height: 0.54" material="color: black; opacity:1"
                text="value:The Spring is connected to the electromagnet and tends to resist the movement of the coil when there is current running through it. This controls the motion of the coil.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_Q3" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 2.99 ; height: 0.29" material="color: black; opacity:1"
                text="value:It is attached to the moving coil so that it moves over the scale when the coil rotates.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_A3" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 2.99 ; height: 0.29" material="color: black; opacity:1"
                text="value:A Needle is attached to the moving coil so that it moves over the scale when the coil rotates.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_Q4" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 2.99; height: 0.299" material="color: black; opacity:1"
                text="value:It is a strong, U-shaped magnet with concave pole pieces.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_A4" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 2.99; height: 0.299" material="color: black; opacity:1"
                text="value:A Permanent Magnet is a strong, U-shaped magnet with concave pole pieces.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_Q5" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 2.9; height: 0.28" material="color: black; opacity:1"
                text="value:It is used to measure the deflection of the coil via a needle.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="i_A5" setactive="value:false ; scale :0.1" vo_enable position="0 -0.13 -0.3" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 2.9; height: 0.28" material="color: black; opacity:1"
                text="value:A Scale is used to measure the deflection of the coil via a needle.; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="l_score" setactive="value:false ; scale: 0.1" position="-0.10 0.024 -0.275" scale="0.1 0.1 0.1" geometry="primitive: plane; width: 0.59; height: 0.16" material="color: black; opacity:1" text="value: Score : 0; align:center; width: 2.8;">
        </a-entity>

        <a-entity id="welldone_d" setactive="value:false ; scale: 0.1"
        position="0.138 -0.03 -0.270" scale="0.1 0.1 0.1"
          text="value: WellDone!;color: green; width: 4;">
        </a-entity>

        <a-entity id="tryagain_d" setactive="value:false ; scale: 0.1"
        position="0.138 -0.03 -0.270" scale="0.1 0.1 0.1"
          text="value: TryAgain.;color: red; width: 4;">
        </a-entity>


    </a-camera>


</a-scene>





<!-- -------------------------------------------------------------------------------------------------------------------- -->
<script>
    var assetsId = '#assets';
    var entity = document.querySelector(assetsId);
    var controllerId = null;

    if (entity != null) {
        entity.addEventListener("loaded", function() {
            console.log("All Assets looded");
            setTimeout(ShowMainMenu, 2000);
            setInterval(ActivateController, 1000);
            login_isUserAuthenticated();

        });

        entity.addEventListener("timeout", function() {
            console.log("Time up to load assets");
            setTimeout(location.reload.bind(location), 500);
        });

    } else {
        console.log("Exception : Id not found ID: ", assetsId);
    }


    function ShowMainMenu() {
        SetActive('#MainMenu', true);
        if (!login_isReferred()) {
            SetActive('#btn_close', false);
        }
    }


    function ActivateController() {
        let cId = "";

        if (AFRAME.utils.device.isGearVR()) {
            cId = '#gvrc';
            app_device_platform = "GearVR";
        } else if (isDayDream()) {
            cId = '#ddc';
            var gvrc = document.querySelector('#gvrc');
            var oc = document.querySelector('#oc');
            gvrc.parentNode.removeChild(gvrc);
            oc.parentNode.removeChild(oc);
            SetActive('#cursor', false);
            app_device_platform = "Daydream";
        } else if (AFRAME.utils.device.isOculusGo()) {
            cId = '#oc';
            app_device_platform = "OculusGo";
        } else {
            cId = '#cursor';

            let isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

            if (isMobile) {
                app_device_platform = "Cardboard";
                let scene = document.querySelector('a-scene');
                //scene.setAttribute('vr-mode-ui','enabled',true);
            } else {
                app_device_platform = "Desktop";
                let scene = document.querySelector('a-scene');
                //scene.setAttribute('vr-mode-ui','enabled',false);
            }

        }

        if (cId != controllerId) {
            SetActive(controllerId, false);
            controllerId = cId;
            SetActive(controllerId, true);
            console.log("controller id is ", controllerId);
        }
    }

    function isDayDream() {
        let isDayDream = false;
        let gamepad = navigator.getGamepads()[0];
        if (gamepad != undefined) {
            let gamepadId = gamepad.id;
            isDayDream = gamepadId.includes("Daydream") || gamepadId.includes("daydream");
        }
        return isDayDream;
    }


    window.onload = function() {

        login_referred_set();

        if (!login_isUserAuthenticated()) {
            //window.location.href = "login.html";
            window.location.href = "http://ec2-52-5-117-32.compute-1.amazonaws.com/unicef/public/";

        } else {
            console.log("User Name : ", login_getCookie('unicef_name'));
        }

    };
</script>
